apiVersion: v2
name: monitoring-stack
description: Observability stack with OpenTelemetry, Prometheus, and Grafana
type: application
version: 1.0.0
appVersion: "1.0.0"

# Dependencies - Monitoring and Observability tools
# These are the types of charts your parsers already track!
dependencies:
  # OpenTelemetry Collector - Already have parser!
  - name: opentelemetry-collector
    version: 0.68.0
    repository: https://open-telemetry.github.io/opentelemetry-helm-charts
    condition: opentelemetry.enabled
    tags:
      - observability
      - tracing

  # Prometheus - Common monitoring tool
  - name: prometheus
    version: 23.4.0
    repository: https://prometheus-community.github.io/helm-charts
    condition: prometheus.enabled
    tags:
      - monitoring
      - metrics

  # Grafana - Visualization
  - name: grafana
    version: 6.58.9
    repository: https://grafana.github.io/helm-charts
    condition: grafana.enabled
    tags:
      - visualization
      - dashboards

  # Loki - Log aggregation
  - name: loki
    version: 5.15.0
    repository: https://grafana.github.io/helm-charts
    condition: loki.enabled
    tags:
      - logging

maintainers:
  - name: SRE Team
    email: SRE@obsy.io

keywords:
  - monitoring
  - observability
  - prometheus
  - grafana
  - opentelemetry
  - loki

# CloudWave update policies
annotations:
  # This stack should stay current with latest stable releases
  cloudwave.io/update-policy: "latest"

  # But be conservative with Prometheus (production critical)
  cloudwave.io/prometheus-policy: "latest-1"

  # OpenTelemetry can be on latest (new project, rapid iteration)
  cloudwave.io/opentelemetry-collector-policy: "latest"

  # Grafana: only minor updates (UI changes can break dashboards)
  cloudwave.io/grafana-policy: "minor-only"

  # Loki: only patch updates (log storage is critical)
  cloudwave.io/loki-policy: "patch-only"
